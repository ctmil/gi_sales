<?xml version="1.0"?>
<openerp>
	<data>	
		<report id="report_gi_sale_order"
			string="Reporte de Transporte"
			model="sale.order"
			report_type="qweb-pdf"
			name="gi_sales.report_gi_sale_order_template"
			/>

		<template id="report_gi_sale_order_template">
			<t t-call="report.html_container">
				<t t-foreach="docs" t-as="o">
					<t t-call="report.external_layout">
						<div class="page">
							<!-- Report page content -->
							<!-- Bloque 1 -->
							<div class="row">
								<div class="col col-xs-9">
								</div>
								<div class="col col-xs-3">
									<img class="img img-responsive center-block" 
										  t-attf-src="data:image/*;base64,{{o.company_id.logo}}"
										  t-att-alt="o.company_id.name" />
								</div>
							</div>
							<div class="row">
								<div class="col col-xs-3">
									<strong>Envío</strong>
								</div>
								<div class="col col-xs-3">
									<strong>Número </strong><span t-field="o.name" />
								</div>
								<div class="col col-xs-3">
									<strong>Fecha </strong><span t-field="o.date_order" t-field-options='{"format": "dd-MM-yyyy"}'/>
								</div>
							</div>
							<div class="row">
								<div class="col col-xs-12">
									<strong>Transporte </strong><span t-field="o.carrier_id.name" />
								</div>
							</div>
							<div class="row">
								<div class="col col-xs-12">
									<strong>Cliente </strong><span t-field="o.partner_id.name" />
								</div>
							</div>
							<div class="row">
								<div class="col col-xs-4">
						                  <div t-if="o.partner_shipping_id != o.partner_invoice_id" class="mt8">
						                        <strong>Dirección envío</strong>
						                        <div t-field="o.partner_shipping_id" 
						                            t-field-options='{"widget": "contact", "fields": ["address", "name", "phone", "fax"], "no_marker": true}'/>
						                        <p t-if="o.partner_id.vat">CUIT: <span t-field="o.partner_id.vat"/></p>
								  </div>
						                  <div t-if="o.partner_shipping_id == o.partner_invoice_id" class="mt8">
						                        <strong>Dirección envío</strong>
						                        <div t-field="o.partner_invoice_id" 
						                            t-field-options='{"widget": "contact", "fields": ["address", "name", "phone", "fax"], "no_marker": true}'/>
						                        <p t-if="o.partner_id.vat">CUIT: <span t-field="o.partner_id.vat"/></p>
								  </div>
								</div>
								<div class="col col-xs-4">
						                  <div t-if="o.company_id" class="mt8">
						                        <strong>Remitente</strong>
						                        <div t-field="o.company_id.partner_id" 
						                            t-field-options='{"widget": "contact", "fields": ["address", "name", "phone", "fax"], "no_marker": true}'/>
						                        <p t-if="o.company_id.partner_id.vat">CUIT: <span t-field="o.company_id.partner_id.vat"/></p>
								  </div>
								</div>
								<div class="col col-xs-4">
									<img class="img img-responsive center-block" 
										t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('Code128', o.name, 300, 30)" />
								</div>
							</div>
					                <div class="row">
						                <div class="col-xs-12">
						                    <table class="table table-condensed">
						                        <tr class="border-black">
										<td>TALÓN PARA ADMINISTRACIÓN - ENTREGAR CON GUÍA ABROCHADA</td>
									</tr>
								    </table>
								</div>
							</div>
							<!-- Bloque 2 -->
							<div class="row">
								<div class="col col-xs-9">
								</div>
								<div class="col col-xs-3">
									<img class="img img-responsive center-block" 
										  t-attf-src="data:image/*;base64,{{o.company_id.logo}}"
										  t-att-alt="o.company_id.name" />
								</div>
							</div>
							<div class="row">
								<div class="col col-xs-3">
									<strong>Envío</strong>
								</div>
								<div class="col col-xs-3">
									<strong>Número </strong><span t-field="o.name" />
								</div>
								<div class="col col-xs-3">
									<strong>Fecha </strong><span t-field="o.date_order" t-field-options='{"format": "dd-MM-yyyy"}'/>
								</div>
							</div>
							<div class="row">
								<div class="col col-xs-12">
									<strong>Transporte </strong><span t-field="o.carrier_id.name" />
								</div>
							</div>
							<div class="row">
								<div class="col col-xs-12">
									<strong>Cliente </strong><span t-field="o.partner_id.name" />
								</div>
							</div>
							<div class="row">
								<div class="col col-xs-4">
						                  <div t-if="o.partner_shipping_id != o.partner_invoice_id" class="mt8">
						                        <strong>Dirección envío</strong>
						                        <div t-field="o.partner_shipping_id" 
						                            t-field-options='{"widget": "contact", "fields": ["address", "name", "phone", "fax"], "no_marker": true}'/>
						                        <p t-if="o.partner_id.vat">CUIT: <span t-field="o.partner_id.vat"/></p>
								  </div>
						                  <div t-if="o.partner_shipping_id == o.partner_invoice_id" class="mt8">
						                        <strong>Dirección envío</strong>
						                        <div t-field="o.partner_invoice_id" 
						                            t-field-options='{"widget": "contact", "fields": ["address", "name", "phone", "fax"], "no_marker": true}'/>
						                        <p t-if="o.partner_id.vat">CUIT: <span t-field="o.partner_id.vat"/></p>
								  </div>
								</div>
								<div class="col col-xs-4">
						                  <div t-if="o.user_id" class="mt8">
						                        <strong>Vendedor </strong><span t-field="o.user_id.name" />
								  </div>
								</div>
								<div class="col col-xs-4">
									<img class="img img-responsive center-block" 
										t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('Code128', o.name, 300, 30)" />
								</div>
							</div>
							<!-- Bloque 3 -->
					                <div class="row">
						                <div class="col-xs-12">
						                    <table class="table table-condensed">
						                        <tr class="border-black">
										<td>TALÓN PARA RENDIR LAS GUÍAS ENTREGADAS</td>
										<!-- td>
											<img class="img img-responsive center-block" 
											t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('Code128', o.name, 300, 30)" />
										</td -->
									</tr>
								    </table>
								</div>
							</div>
							<div class="row">
								<div class="col col-xs-9">
								</div>
								<div class="col col-xs-3">
									<img class="img img-responsive center-block" 
										  t-attf-src="data:image/*;base64,{{o.company_id.logo}}"
										  t-att-alt="o.company_id.name" />
								</div>
							</div>
							<div class="row">
							</div>
							<div class="row">
								<div class="col col-xs-2">
									<strong>Envío</strong>
								</div>
								<div class="col col-xs-3">
									<strong>Número </strong><span t-field="o.name" />
								</div>
								<div class="col col-xs-4">
									<img class="img img-responsive center-block" 
										t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('Code128', o.name, 300, 30)" />
								</div>
							</div>
							<div class="row">
								<div class="col col-xs-4">
									<strong>Fecha </strong><span t-field="o.date_order" t-field-options='{"format": "dd-MM-yyyy"}'/>
								</div>
								<div class="col col-xs-4">
									<strong>Guía </strong>
								</div>
							</div>
							<div class="row">
								<div class="col col-xs-12">
									<strong>Transporte </strong><span t-field="o.carrier_id.name" />
								</div>
							</div>
							<div class="row">
								<div class="col col-xs-12">
									<strong>Cliente </strong><span t-field="o.partner_id.name" />
								</div>
							</div>
							<div class="row">
								<div class="col col-xs-4">
						                  <div t-if="o.partner_shipping_id != o.partner_invoice_id" class="mt8">
						                        <strong>Dirección envío</strong>
						                        <div t-field="o.partner_shipping_id" 
						                            t-field-options='{"widget": "contact", "fields": ["address", "name", "phone", "fax"], "no_marker": true}'/>
						                        <p t-if="o.partner_id.vat">CUIT: <span t-field="o.partner_id.vat"/></p>
								  </div>
						                  <div t-if="o.partner_shipping_id == o.partner_invoice_id" class="mt8">
						                        <strong>Dirección envío</strong>
						                        <div t-field="o.partner_invoice_id" 
						                            t-field-options='{"widget": "contact", "fields": ["address", "name", "phone", "fax"], "no_marker": true}'/>
						                        <p t-if="o.partner_id.vat">CUIT: <span t-field="o.partner_id.vat"/></p>
								  </div>
								</div>
								<div class="col col-xs-4">
						                  <div t-if="o.amount_total" class="mt8">
						                        <strong>Importe </strong><span t-field="o.amount_total" 
										t-field-options='{"widget": "monetary", "display_currency": "o.currency_id"}'/>
								  </div>
								</div>
							</div>
						</div> <!-- page -->
					</t>
				</t>
			</t>
		</template>

	</data>
</openerp>
